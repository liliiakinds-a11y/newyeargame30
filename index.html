<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã‚¸ãƒ£ãƒ³ãƒ—</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #ffeefc;
    font-family: "Noto Sans JP", sans-serif;
  }

  #gameCanvas {
    display: block;
    margin: 0 auto;
    background: linear-gradient(#d6eaff, #ffffff);
    border: 3px solid #fff;
  }

  #startScreen, #clearScreen {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(255,255,255,0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    text-align: center;
  }

  button {
    margin-top: 20px;
    padding: 12px 25px;
    font-size: 22px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #ff66c4;
    color: white;
  }
</style>
</head>
<body>

<div id="startScreen">
  <h1>ğŸ‰ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã‚¸ãƒ£ãƒ³ãƒ—ğŸ‰</h1>
  <p>2026å¹´ ã‚ã‘ã¾ã—ã¦ãŠã‚ã§ã¨ã†ï¼<br>10å›ã‚¸ãƒ£ãƒ³ãƒ—ã§ã‚¯ãƒªã‚¢ã‚’ç›®æŒ‡ãã†ï¼</p>
  <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="clearScreen" style="display:none;">
  <h1>ğŸŠ ã‚¯ãƒªã‚¢ï¼ ğŸŠ</h1>
  <p>10å›ã‚¸ãƒ£ãƒ³ãƒ—é”æˆï¼<br>ä»Šå¹´ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ğŸ‰âœ¨</p>
  <button onclick="location.reload()">ã‚‚ã†ä¸€åº¦</button>
</div>

<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// â˜…ã“ã“ã«ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ç”»åƒã®URLã‚’å…¥ã‚Œã‚‹
const unicornImgURL = "https://postimg.cc/gallery/txvhf0z";  
// â†‘ã‚ã¨ã§ CodePen ã® Assets ã«ã‚¢ãƒƒãƒ—ã—ã¦ã€è‡ªåˆ†ã®URLã«å¤‰ãˆã¦ã­ï¼

const playerImg = new Image();
playerImg.src = unicornImgURL;

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
let player = {
  x: 200,
  y: 500,
  width: 50,
  height: 50,
  vy: 0
};

let gravity = 0.3;
let jumpPower = -8;
let platforms = [];
let jumpCount = 0;
let gameStarted = false;

// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”Ÿæˆ
for (let i = 0; i < 6; i++) {
  platforms.push({
    x: Math.random() * 350,
    y: i * 100
  });
}

// ã‚²ãƒ¼ãƒ é–‹å§‹
function startGame() {
  document.getElementById("startScreen").style.display = "none";
  gameStarted = true;
  loop();
}

// ã‚¯ãƒªãƒƒã‚¯ or ã‚¿ãƒƒãƒ—ã§ã‚¸ãƒ£ãƒ³ãƒ—
document.addEventListener("mousedown", jump);
document.addEventListener("touchstart", jump);

function jump() {
  if (!gameStarted) return;
  player.vy = jumpPower;
  jumpCount++;

  // 10å›ã§ã‚¯ãƒªã‚¢
  if (jumpCount >= 10) {
    document.getElementById("clearScreen").style.display = "flex";
  }
}

function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ç‰©ç†è¨ˆç®—
  player.vy += gravity;
  player.y += player.vy;

  // ç”»é¢ä¸Šã«æˆ»ã™
  if (player.y < 200) {
    player.y = 200;

    // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä¸‹ã«ç§»å‹•
    for (let p of platforms) {
      p.y += 3;
      if (p.y > 600) {
        p.y = 0;
        p.x = Math.random() * 350;
      }
    }
  }

  // æç”»ï¼šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
  ctx.drawImage(playerImg, player.x - 25, player.y - 25, 50, 50);

  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
  ctx.fillStyle = "#9ce7ff";
  for (let p of platforms) {
    ctx.fillRect(p.x, p.y, 80, 10);

    // å½“ãŸã‚Šåˆ¤å®š
    if (
      player.vy > 0 &&
      player.x > p.x - 20 &&
      player.x < p.x + 80 &&
      player.y + 25 > p.y &&
      player.y + 25 < p.y + 20
    ) {
      player.vy = jumpPower;
    }
  }

  // è½ä¸‹ â†’ ã‚„ã‚Šç›´ã—
  if (player.y > 650) {
    location.reload();
  }

  requestAnimationFrame(loop);
}
</script>
</body>
</html>
